<!-- ProgrammerWindow.xaml -->
<Window x:Class="CalculatorApp.ProgrammerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:CalculatorApp.ViewModels"
        xmlns:conv="clr-namespace:CalculatorApp.Converters"
        Title="Programmer Mode" Height="500" Width="400">
    <Window.Resources>
        <conv:DigitEnabledMultiConverter x:Key="DigitEnabledMultiConverter"/>
    </Window.Resources>
    <Window.DataContext>
        <local:ProgrammerCalculatorViewModel/>
    </Window.DataContext>
    <Grid Background="#1E1E1E">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <!-- Top Panel: Base Selection & Return Button -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="10">
            <!-- ComboBox for selecting the numeric base.
           Using SelectedValuePath="Tag" so that the SelectedBase property gets 2, 8, 10, or 16 -->
            <ComboBox Width="120" SelectedValue="{Binding SelectedBase, Mode=TwoWay}" SelectedValuePath="Tag">
                <ComboBoxItem Content="Binary" Tag="2"/>
                <ComboBoxItem Content="Octal" Tag="8"/>
                <ComboBoxItem Content="Decimal" Tag="10" IsSelected="True"/>
                <ComboBoxItem Content="Hexadecimal" Tag="16"/>
            </ComboBox>
            <Button Content="Return to Standard Mode" Margin="10,0,0,0" Click="ReturnToStandardMode_Click"/>
        </StackPanel>

        <!-- Display Area -->
        <TextBlock Text="{Binding DisplayText}" FontSize="40" Foreground="White" TextAlignment="Right" Margin="10" Grid.Row="1"/>

        <!-- Buttons Grid -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <!-- row 0 -->
                <RowDefinition Height="*"/>
                <!-- row 1 -->
                <RowDefinition Height="*"/>
                <!-- row 2 -->
                <RowDefinition Height="*"/>
                <!-- row 3 -->
                <RowDefinition Height="*"/>
                <!-- row 4 -->
                <RowDefinition Height="Auto"/>
                <!-- new row 5 -->
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Row 0: Operators -->
            <Button Content="+" Grid.Row="0" Grid.Column="0" Command="{Binding OperatorCommand}" CommandParameter="+"/>
            <Button Content="-" Grid.Row="0" Grid.Column="1" Command="{Binding OperatorCommand}" CommandParameter="-"/>
            <Button Content="*" Grid.Row="0" Grid.Column="2" Command="{Binding OperatorCommand}" CommandParameter="*"/>
            <Button Content="/" Grid.Row="0" Grid.Column="3" Command="{Binding OperatorCommand}" CommandParameter="/"/>

            <!-- Row 1: 7, 8, 9, A -->
            <Button Content="7" Grid.Row="1" Grid.Column="0" Command="{Binding NumberCommand}" CommandParameter="7">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="8" Grid.Row="1" Grid.Column="1" Command="{Binding NumberCommand}" CommandParameter="8">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="9" Grid.Row="1" Grid.Column="2" Command="{Binding NumberCommand}" CommandParameter="9">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="A" Grid.Row="1" Grid.Column="3" Command="{Binding NumberCommand}" CommandParameter="A">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>

            <!-- Row 2: 4, 5, 6, B -->
            <Button Content="4" Grid.Row="2" Grid.Column="0" Command="{Binding NumberCommand}" CommandParameter="4">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="5" Grid.Row="2" Grid.Column="1" Command="{Binding NumberCommand}" CommandParameter="5">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="6" Grid.Row="2" Grid.Column="2" Command="{Binding NumberCommand}" CommandParameter="6">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="B" Grid.Row="2" Grid.Column="3" Command="{Binding NumberCommand}" CommandParameter="B">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>

            <!-- Row 3: 1, 2, 3, C -->
            <Button Content="1" Grid.Row="3" Grid.Column="0" Command="{Binding NumberCommand}" CommandParameter="1">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="2" Grid.Row="3" Grid.Column="1" Command="{Binding NumberCommand}" CommandParameter="2">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="3" Grid.Row="3" Grid.Column="2" Command="{Binding NumberCommand}" CommandParameter="3">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="C" Grid.Row="3" Grid.Column="3" Command="{Binding NumberCommand}" CommandParameter="C">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>

            <!-- Row 4: 0, D, E, F -->
            <Button Content="0" Grid.Row="4" Grid.Column="0" Command="{Binding NumberCommand}" CommandParameter="0"/>
            <Button Content="D" Grid.Row="4" Grid.Column="1" Command="{Binding NumberCommand}" CommandParameter="D">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="E" Grid.Row="4" Grid.Column="2" Command="{Binding NumberCommand}" CommandParameter="E">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>
            <Button Content="F" Grid.Row="4" Grid.Column="3" Command="{Binding NumberCommand}" CommandParameter="F">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource DigitEnabledMultiConverter}">
                        <Binding Path="SelectedBase"/>
                        <Binding RelativeSource="{RelativeSource Self}" Path="Content"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>

            <Grid Grid.Row="5" Grid.ColumnSpan="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Content="=" 
            Grid.Column="0" 
            Command="{Binding EqualsCommand}"
            FontSize="18"
            Margin="5"/>

                <Button Content="Clear" 
            Grid.Column="1" 
            Command="{Binding ClearCommand}"
            FontSize="18"
            Margin="5"/>
            </Grid>

            <!-- (Optional) You can add extra rows/buttons for Equals and Clear if you prefer -->
        </Grid>
    </Grid>
</Window>
